<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>VIVA+ | Redefinir Senha</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' type='text/css' media='screen' href='style.css'>
    <link rel='stylesheet' type='text/css' media='screen' href='form.css'>
    <script src='main.js'></script>
</head>
<body>
    <header>
        <div class="cabeca">
            <div><img class="logo" src="Img/Logo 2.0 color.png"></div>
            <div class="buttons buttonsR">
                <a class="btn1" href="index.html">Início</a><div class="linhaV"></div>
                <a class="btn2" href="login.html">Entrar</a>
            </div>
        </div>
    </header>
    
    <main>
        <section class="form-section">
            <div class="form-container">
                <h2>Redefinir Senha</h2>
                <p class="instruction-text">
                    Por favor, digite sua nova senha.
                </p>
                
                <?php
                // O PHP é usado aqui APENAS para pegar os valores de 'email' e 'token' da URL
                // e colocá-los em campos ocultos para serem enviados ao processamento.
                
                // Validação de segurança básica: Se não houver email ou token, redireciona.
                if (empty($_GET['email']) || empty($_GET['token'])) {
                    echo '<p class="form-link" style="color: red;">Link de redefinição inválido. Por favor, tente novamente.</p>';
                    echo '<p class="form-link"><a href="forgot-password.html">Voltar para a Recuperação</a></p>';
                    exit;
                }
                
                $email = htmlspecialchars($_GET['email']);
                $token = htmlspecialchars($_GET['token']);
                ?>

                <form action="processa_redefinicao.php" method="POST">
                    <input type="hidden" name="email" value="<?php echo $email; ?>">
                    <input type="hidden" name="token" value="<?php echo $token; ?>">
                    <div class="input-group">
                        <label for="nova_senha">Nova Senha</label>
                        <input type="password" id="nova_senha" name="nova_senha" required>
                    </div>

                    <div class="input-group">
                        <label for="confirma_senha">Confirmar Nova Senha</label>
                        <input type="password" id="confirma_senha" name="confirma_senha" required>
                    </div>
                    
                    <button type="submit" class="submit-btn">Salvar Nova Senha</button>
                </form>

                <p class="form-link">Voltar para o <a href="login.html">Login</a></p>
            </div>
        </section>
    </main>
</body>
</html>